function scrollToLink(){document.querySelectorAll(".toc a").forEach(e=>{e.onclick=(()=>{window.scrollTo(0,document.querySelector(e.getAttribute("href")).offsetTop)})})}function initSidebar(){if(scrollToLink(),document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.onclick=function(){this.classList.contains("sidebar-nav-active")||(document.querySelector(".sidebar-panel-active").classList.remove("sidebar-panel-active"),document.querySelector("#"+this.dataset.target).classList.add("sidebar-panel-active"),document.querySelector(".sidebar-nav-active").classList.remove("sidebar-nav-active"),this.classList.add("sidebar-nav-active"))}}),document.querySelectorAll(".toc-link").length){let e=document.querySelector(".post-content").querySelectorAll("h1, h2, h3, h4, h5, h6");window.addEventListener("scroll",function(){!function(e,t){let o="";for(let c=0;c<e.length;c++){const i=e[c];if(!(t>i.offsetTop-64))break;o="#"+i.attributes.id.value}let c=document.querySelector(".toc-link.active");o||(o="#"+document.querySelector("h2").id);if(!c||c.attributes.href!==o){let e=document.querySelector(".toc-link[href='"+o+"']");e&&(!function(e){document.querySelectorAll(".toc-item").forEach(e=>{e.classList.remove("active")});let t=e.parentNode;t.classList.add("active");for(;t.parentNode.classList.contains("toc-child");)(t=t.parentNode.parentNode).classList.add("active")}(e),i=o,window.history.replaceState&&i!==window.location.hash&&window.history.replaceState(void 0,void 0,i))}var i}(e,window.scrollY)})}}document.addEventListener("DOMContentLoaded",initSidebar),document.addEventListener("pjax:success",initSidebar);